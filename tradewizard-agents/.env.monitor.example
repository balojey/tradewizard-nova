# ============================================================================
# TradeWizard Automated Market Monitor Configuration
# ============================================================================
# This file contains configuration specific to the Automated Market Monitor
# service. Copy this file to .env and fill in your actual values.
#
# For complete configuration including LLM providers and other settings,
# see .env.example in the root directory.

# ============================================================================
# Supabase Configuration (REQUIRED)
# ============================================================================
# Configure connection to Supabase PostgreSQL for persistent storage
# Get these values from your Supabase project settings

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# ============================================================================
# Polymarket API Configuration (REQUIRED)
# ============================================================================
# Configure connection to Polymarket's prediction market APIs

POLYMARKET_GAMMA_API_URL=https://gamma-api.polymarket.com
POLYMARKET_CLOB_API_URL=https://clob.polymarket.com
POLYMARKET_RATE_LIMIT_BUFFER=80

# ============================================================================
# LLM Configuration (REQUIRED)
# ============================================================================
# The monitor uses the Market Intelligence Engine which requires LLM access
# Configure at least one provider (OpenAI, Anthropic, or Google)

# Option 1: Single Provider Mode (Budget-Friendly)
LLM_SINGLE_PROVIDER=openai
OPENAI_API_KEY=sk-your_openai_api_key_here
OPENAI_DEFAULT_MODEL=gpt-4o-mini

# Option 2: Multi-Provider Mode (Optimal Quality)
# Uncomment and configure multiple providers
# OPENAI_API_KEY=sk-your_openai_api_key_here
# OPENAI_DEFAULT_MODEL=gpt-4-turbo
# ANTHROPIC_API_KEY=sk-ant-your_anthropic_api_key_here
# ANTHROPIC_DEFAULT_MODEL=claude-3-sonnet-20240229
# GOOGLE_API_KEY=your_google_api_key_here
# GOOGLE_DEFAULT_MODEL=gemini-1.5-flash

# ============================================================================
# Scheduling Configuration
# ============================================================================
# Configure how often the monitor discovers and analyzes markets

# How often to run market discovery and analysis (in hours)
ANALYSIS_INTERVAL_HOURS=24

# How often to update existing market recommendations (in hours)
UPDATE_INTERVAL_HOURS=24

# Maximum number of markets to analyze per cycle
# Keep this low (1-3) to stay within API quotas
MAX_MARKETS_PER_CYCLE=3

# ============================================================================
# API Quota Management
# ============================================================================
# Configure daily API quotas to stay within free-tier limits
# These limits help prevent unexpected API costs

# NewsAPI daily request limit (legacy - free tier: 100/day)
NEWS_API_DAILY_QUOTA=100

# NewsData.io daily request limit (basic plan: 20,000/day)
NEWSDATA_DAILY_QUOTA=20000

# Twitter API daily request limit (free tier: 500/day)
TWITTER_API_DAILY_QUOTA=500

# Reddit API daily request limit (free tier: 60/hour = ~1440/day)
REDDIT_API_DAILY_QUOTA=60

# ============================================================================
# News API Configuration
# ============================================================================
# Configure news data sources for market analysis

# Legacy NewsAPI Configuration
NEWS_API_PROVIDER=newsapi
NEWS_API_CACHE_TTL=900
NEWS_API_MAX_ARTICLES=50

# NewsData.io Configuration (recommended)
NEWSDATA_ENABLED=true
NEWSDATA_CACHE_TTL_LATEST=900
NEWSDATA_CACHE_TTL_CRYPTO=600
NEWSDATA_CACHE_TTL_MARKET=600
NEWSDATA_CACHE_TTL_ARCHIVE=3600
NEWSDATA_RATE_LIMIT_REQUESTS=1800
NEWSDATA_RATE_LIMIT_WINDOW_MS=900000
NEWSDATA_CIRCUIT_BREAKER_ENABLED=true
NEWSDATA_CIRCUIT_BREAKER_THRESHOLD=5
NEWSDATA_CIRCUIT_BREAKER_TIMEOUT=60000

# Migration Configuration
NEWS_MIGRATION_ENABLED=false
NEWS_MIGRATION_STRATEGY=newsapi-only
NEWS_MIGRATION_PERCENTAGE=0
NEWS_MIGRATION_FALLBACK_ENABLED=true
NEWS_MIGRATION_PRESERVE_CACHE=true
NEWS_MIGRATION_ROLLBACK_ENABLED=true

# Compatibility Settings
NEWS_COMPATIBILITY_MAP_FORMAT=true
NEWS_COMPATIBILITY_EXTENDED_FIELDS=false
NEWS_COMPATIBILITY_DEFAULT_AUTHOR=Unknown
NEWS_COMPATIBILITY_DEFAULT_SOURCE=Unknown Source

# API Keys (add your actual keys)
# NEWS_API_KEY=your_newsapi_key_here
# NEWSDATA_API_KEY=your_newsdata_api_key_here

# ============================================================================
# Service Configuration
# ============================================================================
# Configure the monitor service behavior

# Port for health check endpoint
HEALTH_CHECK_PORT=3000

# Enable manual analysis triggers via API
ENABLE_MANUAL_TRIGGERS=true

# Node environment (development, staging, production)
NODE_ENV=production

# ============================================================================
# Logging Configuration
# ============================================================================
# Configure system logging behavior

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Days to retain audit logs
AUDIT_TRAIL_RETENTION_DAYS=30

# ============================================================================
# Opik Configuration (Observability)
# ============================================================================
# Configure Opik for LLM tracing and cost tracking

OPIK_API_KEY=your_opik_api_key_here
OPIK_PROJECT_NAME=tradewizard-monitor
OPIK_WORKSPACE=default
OPIK_TRACK_COSTS=true

# Optional: Add tags to all traces
OPIK_TAGS=production,automated-monitor,v1.0

# ============================================================================
# LangGraph Configuration
# ============================================================================
# Configure the LangGraph workflow engine

# Use postgres checkpointer for production
LANGGRAPH_CHECKPOINTER=postgres
LANGGRAPH_RECURSION_LIMIT=25
LANGGRAPH_STREAM_MODE=values

# ============================================================================
# Agent Configuration
# ============================================================================
# Configure agent behavior and thresholds

AGENT_TIMEOUT_MS=10000
MIN_AGENTS_REQUIRED=2

# ============================================================================
# Consensus Configuration
# ============================================================================
# Configure trade recommendation thresholds

MIN_EDGE_THRESHOLD=0.05
HIGH_DISAGREEMENT_THRESHOLD=0.15

# ============================================================================
# Advanced Configuration (Optional)
# ============================================================================

# Database connection pool settings
# DB_POOL_MIN=2
# DB_POOL_MAX=10

# Retry configuration
# MAX_RETRY_ATTEMPTS=3
# RETRY_BASE_DELAY_MS=1000

# Circuit breaker configuration
# CIRCUIT_BREAKER_THRESHOLD=5
# CIRCUIT_BREAKER_TIMEOUT_MS=60000
