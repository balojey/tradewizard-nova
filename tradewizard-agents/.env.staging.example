# ============================================================================
# TradeWizard Monitor - Staging Configuration
# ============================================================================
# This file contains staging configuration for the Automated Market Monitor.
# Copy this file to .env.staging and fill in your actual values.
#
# Staging environment is used for testing production-like configurations
# with reduced rate limits and enhanced logging for debugging.

# ============================================================================
# Environment
# ============================================================================
NODE_ENV=staging
LOG_LEVEL=info

# ============================================================================
# Supabase (Staging) - REQUIRED
# ============================================================================
# Use a separate Supabase project for staging
SUPABASE_URL=https://your-staging-project.supabase.co
SUPABASE_KEY=your_staging_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_staging_service_role_key_here

# ============================================================================
# LLM Configuration - REQUIRED
# ============================================================================
# Use cost-effective models for staging
LLM_SINGLE_PROVIDER=openai
OPENAI_API_KEY=sk-staging-your_openai_key_here
OPENAI_DEFAULT_MODEL=gpt-4o-mini

# ============================================================================
# Polymarket API Configuration
# ============================================================================
POLYMARKET_GAMMA_API_URL=https://gamma-api.polymarket.com
POLYMARKET_CLOB_API_URL=https://clob.polymarket.com
POLYMARKET_RATE_LIMIT_BUFFER=80

# Enhanced Event-Based Configuration for Staging
POLYMARKET_POLITICS_TAG_ID=2
POLYMARKET_EVENTS_API_ENDPOINT=/events
POLYMARKET_INCLUDE_RELATED_TAGS=true
POLYMARKET_MAX_EVENTS_PER_DISCOVERY=15
POLYMARKET_MAX_MARKETS_PER_EVENT=30
POLYMARKET_DEFAULT_SORT_BY=volume24hr
POLYMARKET_ENABLE_CROSS_MARKET_ANALYSIS=true
POLYMARKET_CORRELATION_THRESHOLD=0.3
POLYMARKET_ARBITRAGE_THRESHOLD=0.05

# Staging Environment-Specific Configuration
POLYMARKET_STAGING_EVENTS_API_RATE_LIMIT=300
POLYMARKET_STAGING_MAX_REQUESTS_PER_MINUTE=45
POLYMARKET_STAGING_EVENT_CACHE_TTL=180
POLYMARKET_STAGING_ENABLE_DEBUG_LOGGING=false
POLYMARKET_STAGING_ENABLE_MOCK_DATA=false

# Feature Flags (Staging Settings)
POLYMARKET_ENABLE_EVENT_BASED_KEYWORDS=true
POLYMARKET_ENABLE_MULTI_MARKET_ANALYSIS=true
POLYMARKET_ENABLE_CROSS_MARKET_CORRELATION=true
POLYMARKET_ENABLE_ARBITRAGE_DETECTION=true
POLYMARKET_ENABLE_EVENT_LEVEL_INTELLIGENCE=true
POLYMARKET_ENABLE_ENHANCED_EVENT_DISCOVERY=true
POLYMARKET_ENABLE_MULTI_MARKET_FILTERING=true
POLYMARKET_ENABLE_EVENT_RANKING_ALGORITHM=true
POLYMARKET_ENABLE_CROSS_MARKET_OPPORTUNITIES=true

# Error Handling and Resilience
POLYMARKET_MAX_RETRIES=3
POLYMARKET_CIRCUIT_BREAKER_THRESHOLD=5
POLYMARKET_FALLBACK_TO_CACHE=true
POLYMARKET_ENABLE_GRACEFUL_DEGRADATION=true

# Analysis Configuration
POLYMARKET_KEYWORD_EXTRACTION_MODE=event_priority
POLYMARKET_CORRELATION_ANALYSIS_DEPTH=basic
POLYMARKET_RISK_ASSESSMENT_LEVEL=moderate

# ============================================================================
# Scheduling Configuration (Staging)
# ============================================================================
# More frequent analysis for testing
ANALYSIS_INTERVAL_HOURS=12
UPDATE_INTERVAL_HOURS=12
MAX_MARKETS_PER_CYCLE=2

# ============================================================================
# API Quota Management (Staging)
# ============================================================================
# Reduced quotas for staging environment
NEWS_API_DAILY_QUOTA=50
NEWSDATA_DAILY_QUOTA=5000
TWITTER_API_DAILY_QUOTA=250
REDDIT_API_DAILY_QUOTA=30

# ============================================================================
# News API Configuration (Staging)
# ============================================================================
NEWSDATA_ENABLED=true
NEWSDATA_CACHE_TTL_LATEST=600
NEWSDATA_CACHE_TTL_CRYPTO=600
NEWSDATA_CACHE_TTL_MARKET=600
NEWSDATA_CACHE_TTL_ARCHIVE=1800
NEWSDATA_RATE_LIMIT_REQUESTS=900
NEWSDATA_RATE_LIMIT_WINDOW_MS=900000
NEWSDATA_CIRCUIT_BREAKER_ENABLED=true
NEWSDATA_CIRCUIT_BREAKER_THRESHOLD=3
NEWSDATA_CIRCUIT_BREAKER_TIMEOUT=30000

# ============================================================================
# Opik Configuration (Staging)
# ============================================================================
OPIK_API_KEY=your_staging_opik_key_here
OPIK_PROJECT_NAME=tradewizard-monitor-staging
OPIK_WORKSPACE=staging
OPIK_TRACK_COSTS=true
OPIK_TAGS=staging,testing,pre-production

# ============================================================================
# LangGraph Configuration (Staging)
# ============================================================================
LANGGRAPH_CHECKPOINTER=postgres
LANGGRAPH_RECURSION_LIMIT=25
LANGGRAPH_STREAM_MODE=values

# ============================================================================
# Agent Configuration (Staging)
# ============================================================================
AGENT_TIMEOUT_MS=8000
MIN_AGENTS_REQUIRED=2

# ============================================================================
# Consensus Configuration (Staging)
# ============================================================================
MIN_EDGE_THRESHOLD=0.05
HIGH_DISAGREEMENT_THRESHOLD=0.15

# ============================================================================
# Logging Configuration (Staging)
# ============================================================================
AUDIT_TRAIL_RETENTION_DAYS=30

# ============================================================================
# Service Configuration (Staging)
# ============================================================================
HEALTH_CHECK_PORT=3001
ENABLE_MANUAL_TRIGGERS=true

# ============================================================================
# External Data Sources (Staging)
# ============================================================================
# Use test API keys for staging
# NEWSDATA_API_KEY=your_staging_newsdata_key_here
# TWITTER_BEARER_TOKEN=your_staging_twitter_token_here

# ============================================================================
# Agent Autonomous Mode Configuration
# ============================================================================
# Autonomous mode is now ENABLED BY DEFAULT (recommended)
# Agents use LangChain's tool-calling capabilities to autonomously fetch and
# analyze data during execution, providing higher quality analysis.
#
# To disable autonomous mode for a specific agent, set its variable to false:
# BREAKING_NEWS_AGENT_AUTONOMOUS=false
# MEDIA_SENTIMENT_AGENT_AUTONOMOUS=false
# MARKET_MICROSTRUCTURE_AGENT_AUTONOMOUS=false
# POLLING_AGENT_AUTONOMOUS=false

# Breaking News Agent Configuration
BREAKING_NEWS_AGENT_AUTONOMOUS=true          # Autonomous mode enabled by default
BREAKING_NEWS_AGENT_MAX_TOOL_CALLS=5         # Max tools per analysis
BREAKING_NEWS_AGENT_TIMEOUT=45000            # Timeout in milliseconds
BREAKING_NEWS_AGENT_CACHE_ENABLED=true       # Enable result caching
BREAKING_NEWS_AGENT_FALLBACK_TO_BASIC=true   # Fallback on error

# Media Sentiment Agent Configuration
MEDIA_SENTIMENT_AGENT_AUTONOMOUS=true        # Autonomous mode enabled by default
MEDIA_SENTIMENT_AGENT_MAX_TOOL_CALLS=5
MEDIA_SENTIMENT_AGENT_TIMEOUT=45000
MEDIA_SENTIMENT_AGENT_CACHE_ENABLED=true
MEDIA_SENTIMENT_AGENT_FALLBACK_TO_BASIC=true

# Market Microstructure Agent Configuration
MARKET_MICROSTRUCTURE_AGENT_AUTONOMOUS=true  # Autonomous mode enabled by default
MARKET_MICROSTRUCTURE_AGENT_MAX_TOOL_CALLS=5
MARKET_MICROSTRUCTURE_AGENT_TIMEOUT=45000
MARKET_MICROSTRUCTURE_AGENT_CACHE_ENABLED=true
MARKET_MICROSTRUCTURE_AGENT_FALLBACK_TO_BASIC=true

# Polling Agent Configuration
POLLING_AGENT_AUTONOMOUS=true                # Autonomous mode enabled by default
POLLING_AGENT_MAX_TOOL_CALLS=5
POLLING_AGENT_TIMEOUT=45000
POLLING_AGENT_CACHE_ENABLED=true
POLLING_AGENT_FALLBACK_TO_BASIC=true